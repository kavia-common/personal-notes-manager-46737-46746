{"is_source_file": true, "format": "TypeScript", "description": "This file defines a Notes service for a frontend application, including types for notes, functions for local storage management, and API interaction methods for CRUD operations of notes. It handles both local storage and optional API backend communication, with fallback mechanisms.", "external_files": ["fetch", "crypto", "window.localStorage", "import.meta", "process.env"], "external_methods": ["fetch", "crypto.randomUUID", "Date.now()", "JSON.parse", "JSON.stringify"], "published": ["getClientNotesService"], "classes": [], "methods": [{"name": "export function getClientNotesService() { getClientNotesService", "description": "Provides a notes management service offering methods for listing, creating, updating, and removing notes, handling both local storage and backend API communication with fallback.", "scope": "", "scopeKind": ""}, {"name": "function cryptoRandomId() { cryptoRandomId", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function localRemove(id: string) { localRemove", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function readLocal(): Note[] { readLocal", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function seedIfFirstRun() { seedIfFirstRun", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function writeLocal(notes: Note[]) { writeLocal", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getApiBase", "readLocal", "writeLocal", "seedIfFirstRun", "cryptoRandomId", "api", "localList", "localCreate", "localUpdate", "localRemove", "fetch"], "search-terms": ["Notes service", "local storage", "API fallback", "TypeScript notes", "notes CRUD"], "state": 2, "file_id": 19, "knowledge_revision": 52, "git_revision": "", "revision_history": [{"41": ""}, {"52": ""}], "ctags": [{"_type": "tag", "name": "CreateNoteInput", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^type CreateNoteInput = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "Note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^export type Note = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^const STORAGE_KEY = \"notes.app.data.v1\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "UpdateNoteInput", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^type UpdateNoteInput = Partial<CreateNoteInput> & { id: string };$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "apiBase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  const apiBase = getApiBase();$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "canUseApi", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  const canUseApi = !!apiBase;$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "cryptoRandomId", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^function cryptoRandomId() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  const existing = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "seedIfFirstRun", "scopeKind": "function"}, {"_type": "tag", "name": "getApiBase", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^const getApiBase = () => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getClientNotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^export function getClientNotesService() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^      ...notes[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const idx = notes.findIndex((n) => n.id === update.id);$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "localRemove", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  function localRemove(id: string) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "newNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const newNote: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const notes = readLocal();$/", "language": "TypeScript", "kind": "constant", "scope": "localRemove", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const now = Date.now();$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  const now = Date.now();$/", "language": "TypeScript", "kind": "constant", "scope": "seedIfFirstRun", "scopeKind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const parsed = JSON.parse(raw);$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const raw = window.localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "readLocal", "scopeKind": "function"}, {"_type": "tag", "name": "readLocal", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^function readLocal(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const res = await fetch(url, {$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "sample", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^  const sample: Note[] = [$/", "language": "TypeScript", "kind": "constant", "scope": "seedIfFirstRun", "scopeKind": "function"}, {"_type": "tag", "name": "seedIfFirstRun", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^function seedIfFirstRun() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const updated: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^    const url = `${apiBase.replace(\\/\\\\\\/$\\/, \"\")}${path}`;$/", "language": "TypeScript", "kind": "constant", "scope": "getClientNotesService", "scopeKind": "function"}, {"_type": "tag", "name": "writeLocal", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-46737-46746/notes_frontend/app/services/notes.client.ts", "pattern": "/^function writeLocal(notes: Note[]) {$/", "language": "TypeScript", "kind": "function"}], "hash": "1b63c8347ed836fc20256a3e40679d9d", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/app/services/notes.client.ts"}